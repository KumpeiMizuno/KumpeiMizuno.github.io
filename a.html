<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="水野　君平" />
  <title>初心者（がやる）セッション</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="a_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="a_files/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="for-revealjs.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">初心者（がやる）セッション</h1>
  <h1 class="subtitle">SapporoR 9th</h1>
    <h2 class="author">水野　君平</h2>
    <h3 class="date">2019年3月2日</h3>
</section>

<section><section id="自己紹介" class="titleslide slide level1"><h1>自己紹介</h1></section><section id="はじめまして" class="slide level2">
<h2>はじめまして</h2>
<ul>
<li>水野君平 <img src="prof.png" alt="icon" height="250" /></li>
<li>北大教育学院（not文学部）D3</li>
<li>専門：教育心理学</li>
<li>R歴：5年（ただしあまり使わない）</li>
</ul>
</section><section id="本セッションの目的" class="slide level2">
<h2>本セッションの目的</h2>
<ul>
<li><span class="citation" data-cites="uranokenさんにRを使わせる">@uranokenさんにRを使わせる</span>（らしい） <img src="urano.jpg" alt="urano" height="550" /></li>
</ul>
</section></section>
<section><section id="rとは" class="titleslide slide level1"><h1>Rとは</h1></section><section id="統計環境ソフトr" class="slide level2">
<h2>統計環境ソフトR</h2>
<ul>
<li>分析できる</li>
<li>データの可視化（グラフ）ができる</li>
<li>スライドをつくれる</li>
<li>Youtubeを観れる</li>
<li>今日は心理調査屋流？のRの使い方
<ul>
<li>統計ソフトとしてのR</li>
</ul></li>
</ul>
</section><section id="rの利点" class="slide level2">
<h2>Rの利点</h2>
<ul>
<li>無料であること（SPSSは高い、Mplusは安い）</li>
<li>拡張性が高い（他ソフトはお着せ）</li>
<li>CUI（プログラム不得意なので少し使いにくい）</li>
<li>コピーアンドペースト（）で操作できる利点</li>
</ul>
</section></section>
<section><section id="rの特徴" class="titleslide slide level1"><h1>Rの特徴</h1></section><section id="rを使って何をするのか" class="slide level2">
<h2>Rを使って何をするのか</h2>
<ul>
<li>高価な有償ソフトを使わなくても研究できる
<ul>
<li>HADがるからいいじゃん</li>
<li>JASPがあるからいいじゃん</li>
</ul></li>
<li>かゆいところに手が届く分析が可能</li>
</ul>
</section><section id="rstudeio" class="slide level2">
<h2>Rstudeio</h2>
<ul>
<li>あると便利、というかほぼマストなもの</li>
<li>高機能システムキッチン</li>
<li>生Rは使いにくい（地獄）</li>
<li>一部GUIなので便利（GUIに慣れているので）</li>
<li>コードをサジェストしてくれる</li>
<li>もちろん無償</li>
</ul>
</section><section id="rstudioの画面" class="slide level2">
<h2>Rstudioの画面</h2>
<div class="column2">
<p><img src="rstudio.png" alt="rstudio" /></p>
</section><section id="さっそくやってみよう" class="slide level2">
<h2>さっそくやってみよう</h2>
<ul>
<li>Rのインストール
<ul>
<li>cran.r-project.org</li>
</ul></li>
<li>RStudioのインストール
<ul>
<li>www.rstudio.com</li>
</ul></li>
</ul>
</section></section>
<section><section id="rstudioの使い方" class="titleslide slide level1"><h1>Rstudioの使い方</h1></section><section id="まずやること" class="slide level2">
<h2>まずやること</h2>
<ul>
<li>Rを自分好みにする</li>
<li>ToolsからGrobal Optionsへ
<div class="column2">
<img src="option.png" alt="option" /></li>
</ul>
</section><section id="groval-options" class="slide level2">
<h2>Groval Options</h2>
<div class="column2">
<p><img src="options.png" alt="options" height="600" /></p>
</section><section id="appearance" class="slide level2">
<h2>Appearance</h2>
<ul>
<li>文字と背景の色でイキろう
<div class="column2">
<img src="app.png" alt="app" height="550" /></li>
</ul>
</section><section id="panel-layout" class="slide level2">
<h2>Panel layout</h2>
<ul>
<li>使いやすいようにパネルの位置を変更することも良い</li>
<li>スクリプトとコンソールは上など
<div class="column2">
<img src="panel.png" alt="panel" height="500" /></li>
</ul>
</section><section id="プロジェクトをつくる" class="slide level2">
<h2>プロジェクトをつくる！</h2>
<ul>
<li>プロジェクトを作成する
<ul>
<li>フォルダみたいなもの</li>
<li>ここに全てを置く
<div class="column2">
<img src="prj.png" alt="prj" /></li>
</ul></li>
</ul>
</section><section id="実際の作成手順" class="slide level2">
<h2>実際の作成手順</h2>
<ul>
<li>fileからnew project</li>
<li>New Directory</li>
<li>Empty Project</li>
<li>Directoryの名前とパスは適当に</li>
</ul>
</section><section id="注意点" class="slide level2">
<h2>注意点</h2>
<ul>
<li>パスに日本語が入るとエラーを吐く場合がある</li>
<li>特にユーザー名を日本語にしている場合は絶望的
<ul>
<li>自分は一度ユーザー設定を作り直した</li>
</ul></li>
</ul>
</section><section id="ちがうかも" class="slide level2">
<h2>ちがうかも</h2>
<p><img src="hokuso.png" alt="hokuso" height="550" /> - らしい</p>
</section><section id="スクリプトを開く" class="slide level2">
<h2>スクリプトを開く</h2>
<div class="column2">
<p><img src="scr.png" alt="scr" /></p>
</section><section id="ででーん" class="slide level2">
<h2>ででーん</h2>
<div class="column2">
<p><img src="scr2.png" alt="scr2" /></p>
</section><section id="スクリプトとは" class="slide level2">
<h2>スクリプトとは？</h2>
<ul>
<li>メモみたいなもの（知らんけど）</li>
<li>生Rだとコンソールに直打ち込み（地獄）</li>
<li>スクリプトだとテキストメモを使う必要もない</li>
</ul>
</section><section id="簡単な計算をする" class="slide level2">
<h2>簡単な計算をする</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">+</span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</section><section id="変数を扱う" class="slide level2">
<h2>変数を扱う</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
x</code></pre></div>
<pre><code>## [1] 2</code></pre>
</section><section id="変数計算も可" class="slide level2">
<h2>変数計算も可</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">*</span><span class="st"> </span><span class="dv">10</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">^</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>( x )</code></pre></div>
<pre><code>## [1] 1.414214</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>x <span class="op">^</span><span class="st"> </span><span class="dv">2</span>
z &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">10</span>
<span class="kw">sum</span>( y , z )</code></pre></div>
<pre><code>## [1] 24</code></pre>
</section></section>
<section><section id="データファイルで分析" class="titleslide slide level1"><h1>データファイルで分析</h1></section><section id="データファイルを使う準備" class="slide level2">
<h2>データファイルを使う準備</h2>
<ul>
<li>データファイルはコンマ区切りのやつ（csv）
<ul>
<li>.excelや.savの拡張子でも読み込める（らしい）</li>
</ul></li>
<li>Excelから作成するときには・・・
<ul>
<li>ファイルから名前を付けて保存</li>
<li>CSV (コンマ区切り) (.csv)で保存</li>
<li>警告を何度か踏むが無視</li>
</ul></li>
</ul>
</section><section id="csv以外を読み込むときには" class="slide level2">
<h2>csv以外を読み込むときには</h2>
<ul>
<li>Import Datasetを押す
<div class="column2">
<img src="import.png" alt="imp" height="600" /></li>
</ul>
</section></section>
<section><section id="データセットの説明" class="titleslide slide level1"><h1>データセットの説明</h1></section><section id="データを読み込む" class="slide level2">
<h2>データを読み込む</h2>
<ul>
<li>ファイル名はdata.csv</li>
<li>1行目は変数名 (英数字、カッコを使わないほうがいい)</li>
<li>欠損値はピリオド</li>
<li>中学校46学級への調査データを共分散行列から再び乱数で作成したもの
<ul>
<li>HADでやりました</li>
<li>なので不自然な値がある</li>
<li>学年、学級、性別もランダムに再割当て（手作業）</li>
</ul></li>
</ul>
</section><section id="どんなデータなのか" class="slide level2">
<h2>どんなデータなのか</h2>
<ul>
<li>id……生徒のID</li>
<li>class……学級のナンバリング</li>
<li>grade……学年</li>
<li>sex……0=男子、1=女子</li>
<li>その他質問項目</li>
</ul>
</section><section id="学級風土" class="slide level2">
<h2>学級風土</h2>
<ul>
<li>zikokaizi
<ul>
<li>「自然な自己開示」という学級風土尺度の下位尺度</li>
</ul></li>
<li>1……個人的な問題を安心して話せる</li>
<li>2……自分たちの気持ちを気軽に言い合える</li>
<li>3……自分たちの気持ちを率直に先生にみせる</li>
</ul>
</section><section id="学校適応感" class="slide level2">
<h2>学校適応感</h2>
<ul>
<li>igokochi
<ul>
<li>「居心地の良さの感覚」という学校適応感尺度の下位尺度</li>
</ul></li>
<li>1……周囲に溶け込めている</li>
<li>2……ありのままの自分を出せている</li>
<li>3……周りの人と楽しい時間を過ごせている</li>
<li>4……自由に話せる雰囲気を感じている</li>
<li>5……自分と周りがかみ合っている</li>
</ul>
</section></section>
<section><section id="データを読み込んで分析する" class="titleslide slide level1"><h1>データを読み込んで分析する</h1></section><section id="データ読み込み" class="slide level2">
<h2>データ読み込み</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;dataset.csv&quot;</span>, <span class="dt">na.strings =</span> <span class="st">&quot;.&quot;</span>, <span class="dt">head=</span>T, <span class="dt">row.names=</span><span class="dv">1</span>)</code></pre></div>
<ul>
<li>na.strings= &quot; . &quot; で . を NA に変更</li>
<li>row.namesで先頭列をidと認識させる</li>
</ul>
</section><section id="まずは" class="slide level2">
<h2>まずは</h2>
<ul>
<li>summary()を用いる
<ul>
<li>データフレームの全ての変数の最小値、第1四分位(25%)、中央値、平均値、第3四分位(75%)、最大値が表示される。</li>
</ul></li>
<li>乱数データなので変な値が出るが気にしないでください</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(dat)</code></pre></div>
<pre><code>##      class           grade            sex           zikokaizi1    
##  Min.   : 1.00   Min.   :1.000   Min.   :0.0000   Min.   :-1.025  
##  1st Qu.:12.00   1st Qu.:1.000   1st Qu.:0.0000   1st Qu.: 2.207  
##  Median :23.00   Median :2.000   Median :1.0000   Median : 3.125  
##  Mean   :23.16   Mean   :2.019   Mean   :0.5503   Mean   : 3.101  
##  3rd Qu.:35.00   3rd Qu.:3.000   3rd Qu.:1.0000   3rd Qu.: 3.937  
##  Max.   :46.00   Max.   :3.000   Max.   :1.0000   Max.   : 7.573  
##                                  NA&#39;s   :5                        
##    zikokaizi2        zikokaizi3        igokochi1         igokochi2      
##  Min.   :-0.5137   Min.   :-0.7089   Min.   :-0.1827   Min.   :-0.5368  
##  1st Qu.: 2.5293   1st Qu.: 2.3409   1st Qu.: 2.9950   1st Qu.: 2.6355  
##  Median : 3.4322   Median : 3.2326   Median : 3.6417   Median : 3.4315  
##  Mean   : 3.4002   Mean   : 3.2021   Mean   : 3.6664   Mean   : 3.4255  
##  3rd Qu.: 4.2295   3rd Qu.: 4.0573   3rd Qu.: 4.3452   3rd Qu.: 4.2637  
##  Max.   : 8.1928   Max.   : 7.3596   Max.   : 6.9891   Max.   : 7.0810  
##  NA&#39;s   :2                           NA&#39;s   :1                          
##    igokochi3       igokochi4         igokochi5       
##  Min.   :0.531   Min.   :-0.1365   Min.   :-0.07205  
##  1st Qu.:3.324   1st Qu.: 3.0179   1st Qu.: 2.85282  
##  Median :4.013   Median : 3.8398   Median : 3.64251  
##  Mean   :3.994   Mean   : 3.7679   Mean   : 3.60712  
##  3rd Qu.:4.679   3rd Qu.: 4.5045   3rd Qu.: 4.32881  
##  Max.   :7.442   Max.   : 7.3863   Max.   : 6.76755  
##  NA&#39;s   :2       NA&#39;s   :1         NA&#39;s   :1</code></pre>
</section><section id="性別と学年の内訳を確認する" class="slide level2">
<h2>性別と学年の内訳を確認する</h2>
<ul>
<li>table()を使う</li>
<li>データフレーム$変数、でどこのどの変数かを指定</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(dat<span class="op">$</span>sex, dat<span class="op">$</span>grade)</code></pre></div>
<pre><code>##    
##       1   2   3
##   0 199 211 225
##   1 258 258 261</code></pre>
<ul>
<li>わかりずら・・・</li>
</ul>
</section><section id="データ変換" class="slide level2">
<h2>データ変換</h2>
<ul>
<li>性別、学年をカテゴリカル変数にする
<ul>
<li>sex=0が男子、1が女子</li>
<li>gradeは数字が学年</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>sex2&lt;-<span class="kw">factor</span>(dat<span class="op">$</span>sex, <span class="dt">labels=</span><span class="kw">list</span>(<span class="st">&quot;boy&quot;</span>, <span class="st">&quot;girl&quot;</span>))
dat<span class="op">$</span>grade2&lt;-<span class="kw">factor</span>(dat<span class="op">$</span>grade, <span class="dt">labels=</span><span class="kw">list</span>(<span class="st">&quot;1st&quot;</span>, <span class="st">&quot;2nd&quot;</span>, <span class="st">&quot;3rd&quot;</span>))</code></pre></div>
</section><section id="もう一度table関数を実行" class="slide level2">
<h2>もう一度table関数を実行</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(dat<span class="op">$</span>sex2, dat<span class="op">$</span>grade2)</code></pre></div>
<pre><code>##       
##        1st 2nd 3rd
##   boy  199 211 225
##   girl 258 258 261</code></pre>
<ul>
<li>イイネ</li>
</ul>
</section></section>
<section><section id="変数の計算とデータセットの書き出し" class="titleslide slide level1"><h1>変数の計算とデータセットの書き出し</h1></section><section id="変数の集計" class="slide level2">
<h2>変数の集計</h2>
<ul>
<li>下位尺度の変数をまとめる</li>
<li>新しくデータセットをつくる</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>zikokaizi&lt;-<span class="st"> </span>(dat<span class="op">$</span>zikokaizi1<span class="op">+</span>dat<span class="op">$</span>zikokaizi2<span class="op">+</span>
<span class="st">                   </span>dat<span class="op">$</span>zikokaizi3)<span class="op">/</span><span class="dv">3</span>
dat<span class="op">$</span>igokochi&lt;-<span class="st"> </span>(dat<span class="op">$</span>igokochi1<span class="op">+</span>dat<span class="op">$</span>igokochi2<span class="op">+</span>dat<span class="op">$</span>igokochi3<span class="op">+</span>
<span class="st">                  </span>dat<span class="op">$</span>igokochi4<span class="op">+</span>dat<span class="op">$</span>igokochi5)<span class="op">/</span><span class="dv">5</span></code></pre></div>
</section><section id="特定の条件でデータを抜き出す" class="slide level2">
<h2>特定の条件でデータを抜き出す</h2>
<ul>
<li>3年生のデータのみを取り出す</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">san &lt;-<span class="st"> </span><span class="kw">subset</span>(dat, grade2<span class="op">==</span><span class="st">&quot;3rd&quot;</span>)
<span class="kw">head</span>(san)</code></pre></div>
<pre><code>##     class grade sex zikokaizi1 zikokaizi2 zikokaizi3 igokochi1 igokochi2
## 306    11     3   0   2.426850   2.289442   3.809834  3.558017  2.318262
## 307    11     3   0   3.084496   5.212387   4.056563  3.239719  4.375513
## 308    11     3   0   3.293465   2.332457   3.097077  3.466792  2.435147
## 309    11     3   0   2.868459   3.383862   3.175218  4.128947  3.252894
## 310    11     3   1   4.194919   4.163725   4.478951  4.781364  4.686919
## 311    11     3   0   1.308495   1.087232   2.546142  1.131737  2.416010
##     igokochi3 igokochi4 igokochi5 sex2 grade2 zikokaizi igokochi
## 306  3.444321  2.933151  2.458916  boy    3rd  2.842042 2.942533
## 307  3.664370  4.941441  4.357842  boy    3rd  4.117815 4.115777
## 308  3.976130  2.908981  3.968420  boy    3rd  2.907666 3.351094
## 309  5.032416  3.685323  4.416290  boy    3rd  3.142513 4.103174
## 310  5.617944  3.198245  3.760299 girl    3rd  4.279199 4.408954
## 311  3.297775  1.422641  1.933586  boy    3rd  1.647290 2.040350</code></pre>
</section><section id="複数の列を取り出す" class="slide level2">
<h2>複数の列を取り出す</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat2&lt;-<span class="st"> </span>dat[,<span class="kw">c</span>(<span class="st">&quot;class&quot;</span>, <span class="st">&quot;grade2&quot;</span>, <span class="st">&quot;sex2&quot;</span>, <span class="st">&quot;zikokaizi&quot;</span>, <span class="st">&quot;igokochi&quot;</span>)]</code></pre></div>
</section><section id="他のやり方" class="slide level2">
<h2>他のやり方</h2>
<ul>
<li>subset()でもできる</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat3 &lt;-<span class="st"> </span><span class="kw">subset</span>(dat, <span class="dt">select=</span><span class="kw">c</span>(class, grade2, sex2, zikokaizi, igokochi))</code></pre></div>
</section><section id="データセットへの書き出し" class="slide level2">
<h2>データセットへの書き出し</h2>
<ul>
<li>Tだとidが一番左端に出力される</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(dat2, <span class="st">&quot;dataset2.csv&quot;</span>, <span class="dt">row.names=</span>F)</code></pre></div>
</section></section>
<section><section id="データの可視化" class="titleslide slide level1"><h1>データの可視化</h1></section><section id="かんたんヒストグラム" class="slide level2">
<h2>かんたんヒストグラム</h2>
<ul>
<li>hist()を使う</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(dat2<span class="op">$</span>igokochi)</code></pre></div>
<p><img src="a_files/figure-revealjs/hist0-1.png" width="576" /></p>
</section><section id="かんたん棒グラフ" class="slide level2">
<h2>かんたん棒グラフ</h2>
<ul>
<li>tapply(変数, 群わけ, みるもの)とbarplot()を使う</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bar &lt;-<span class="st"> </span><span class="kw">tapply</span>(dat2<span class="op">$</span>igokochi, dat2<span class="op">$</span>sex2, mean, <span class="dt">na.rm=</span>T)
<span class="kw">barplot</span>(bar)</code></pre></div>
<p><img src="a_files/figure-revealjs/bar0-1.png" width="576" /></p>
</section><section id="かんたん散布図" class="slide level2">
<h2>かんたん散布図</h2>
<ul>
<li>plot(x軸, y軸)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(dat2<span class="op">$</span>zikokaizi, dat2<span class="op">$</span>igokochi)</code></pre></div>
<p><img src="a_files/figure-revealjs/plot0-1.png" width="576" /></p>
</section><section id="ヒストグラムをきれいに" class="slide level2">
<h2>ヒストグラムをきれいに</h2>
<ul>
<li>ggplot2を使う</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> igokochi))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">na.rm=</span>T, <span class="dt">bins=</span><span class="dv">30</span>)</code></pre></div>
<p><img src="a_files/figure-revealjs/hist-1.png" width="576" /></p>
</section><section id="ヒストグラムを重ねる" class="slide level2">
<h2>ヒストグラムを重ねる</h2>
<ul>
<li>fill=“white”で塗りつぶしを白</li>
<li>colour=“black”で枠の色を黒</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> igokochi, <span class="dt">y=</span>..density..))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">fill=</span><span class="st">&quot;white&quot;</span>, <span class="dt">colour=</span><span class="st">&quot;black&quot;</span>, <span class="dt">na.rm=</span>T, <span class="dt">bins=</span><span class="dv">30</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">na.rm=</span>T)</code></pre></div>
<p><img src="a_files/figure-revealjs/hist2-1.png" width="576" /></p>
</section><section id="ヒストグラムを学年でわける" class="slide level2">
<h2>ヒストグラムを学年でわける</h2>
<ul>
<li>明らかに数がおかしい</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> igokochi, <span class="dt">fill=</span>grade2))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins=</span><span class="dv">20</span>, <span class="dt">na.rm=</span>T)</code></pre></div>
<p><img src="a_files/figure-revealjs/hist3.0-1.png" width="576" /></p>
</section><section id="hoge" class="slide level2">
<h2>ヒストグラムを学年でわける</h2>
<ul>
<li>position = “identity”で重なるように指示</li>
<li>alphaで透明度を指定</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> igokochi, <span class="dt">fill=</span>grade2))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins=</span><span class="dv">20</span>, <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">na.rm=</span>T, <span class="dt">alpha =</span> <span class="fl">0.7</span>)</code></pre></div>
<p><img src="a_files/figure-revealjs/hist3-1.png" width="576" /></p>
</section><section id="棒グラフを学年でわける" class="slide level2">
<h2>棒グラフを学年でわける</h2>
<ul>
<li>stat=“identity”で平均</li>
<li>position=“dodge”で隣接だが…</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> grade2,<span class="dt">y =</span> igokochi))<span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">na.rm=</span>T)</code></pre></div>
<p><img src="a_files/figure-revealjs/bar1-1.png" width="576" /></p>
</section><section id="棒グラフを性別と学年でわける" class="slide level2">
<h2>棒グラフを性別と学年でわける</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> grade2,<span class="dt">y =</span> igokochi, <span class="dt">fill=</span>sex2))<span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">na.rm=</span>T)</code></pre></div>
<p><img src="a_files/figure-revealjs/bar2-1.png" width="576" /></p>
</section><section id="scaleほげを入れる必要があるらしい" class="slide level2">
<h2>scaleほげを入れる必要があるらしい</h2>
<ul>
<li>しかし3年生の棒グラフの幅がおかしい</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> grade2,<span class="dt">y =</span> igokochi, <span class="dt">fill=</span>sex2))<span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">na.rm=</span>T)<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_discrete</span>(<span class="dt">na.translate =</span> F)</code></pre></div>
<p><img src="a_files/figure-revealjs/bar3-1.png" width="576" /></p>
</section><section id="ラベルを日本語に" class="slide level2">
<h2>ラベルを日本語に</h2>
<ul>
<li>labs(x=“”)で各軸や群の内容を付け足す</li>
<li>グラフ隣接が嫌ならposition_dodge(width = 0.5)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x =</span> grade2,<span class="dt">y =</span> igokochi, <span class="dt">fill=</span>sex2))<span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&quot;identity&quot;</span>,<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">na.rm=</span>T)<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_discrete</span>(<span class="dt">na.translate =</span> F)<span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;学年&quot;</span>, <span class="dt">y=</span><span class="st">&quot;居心地の良さの感覚&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;性別&quot;</span>)</code></pre></div>
<p><img src="a_files/figure-revealjs/bar4-1.png" width="576" /></p>
</section><section id="散布図" class="slide level2">
<h2>散布図</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(dat2, <span class="kw">aes</span>(<span class="dt">x=</span>zikokaizi, <span class="dt">y=</span>igokochi))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm=</span>T)</code></pre></div>
<p><img src="a_files/figure-revealjs/plot-1.png" width="576" /></p>
</section><section id="性別ごとの散布図" class="slide level2">
<h2>性別ごとの散布図</h2>
<ul>
<li>性別ごとに色を付け回帰直線を引く（95%CI付き）</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>( dat2, <span class="kw">aes</span> (<span class="dt">x =</span> zikokaizi, <span class="dt">y =</span> igokochi ) )<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span> ( <span class="dt">colour =</span> sex2 ), <span class="dt">na.rm=</span>T ) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_smooth</span>( <span class="dt">method =</span><span class="st">&quot;lm&quot;</span>, <span class="dt">na.rm=</span>T )</code></pre></div>
<p><img src="a_files/figure-revealjs/plot2-1.png" width="576" /></p>
</section><section id="学年ごとの散布図" class="slide level2">
<h2>学年ごとの散布図</h2>
<ul>
<li>学年ごとに色を付け回帰直線を引く（95%CI付き）</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>( dat2, <span class="kw">aes</span> (<span class="dt">x =</span> zikokaizi, <span class="dt">y =</span> igokochi ) )<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>( <span class="kw">aes</span> ( <span class="dt">colour =</span> grade2 ), <span class="dt">na.rm=</span>T ) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_smooth</span>( <span class="dt">method =</span><span class="st">&quot;lm&quot;</span>, <span class="dt">na.rm=</span>T )</code></pre></div>
<p><img src="a_files/figure-revealjs/plot3-1.png" width="576" /></p>
</section></section>
<section><section id="もっと分析していく" class="titleslide slide level1"><h1>もっと分析していく</h1></section><section id="相関を求める" class="slide level2">
<h2>相関を求める</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor.test</span>( dat2<span class="op">$</span>zikokaiz , dat2<span class="op">$</span>igokochi )</code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  dat2$zikokaiz and dat2$igokochi
## t = 36.288, df = 1409, p-value &lt; 2.2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.6670563 0.7210780
## sample estimates:
##       cor 
## 0.6950469</code></pre>
</section><section id="総当たりで相関を求める" class="slide level2">
<h2>総当たりで相関を求める</h2>
<ul>
<li>data.frame(変数)で特定の変数を抜き出せる</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(psych)
cordat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(dat<span class="op">$</span>sex,dat<span class="op">$</span>igokochi, dat<span class="op">$</span>zikokaizi)
<span class="kw">corr.test</span>(cordat)</code></pre></div>
<pre><code>## Call:corr.test(x = cordat)
## Correlation matrix 
##               dat.sex dat.igokochi dat.zikokaizi
## dat.sex          1.00         0.04          0.04
## dat.igokochi     0.04         1.00          0.70
## dat.zikokaizi    0.04         0.70          1.00
## Sample Size 
##               dat.sex dat.igokochi dat.zikokaizi
## dat.sex          1412         1408          1410
## dat.igokochi     1408         1413          1411
## dat.zikokaizi    1410         1411          1415
## Probability values (Entries above the diagonal are adjusted for multiple tests.) 
##               dat.sex dat.igokochi dat.zikokaizi
## dat.sex          0.00         0.21          0.21
## dat.igokochi     0.12         0.00          0.00
## dat.zikokaizi    0.10         0.00          0.00
## 
##  To see confidence intervals of the correlations, print with the short=FALSE option</code></pre>
</section><section id="だいたい全部やってくれるかっこいいヤツ" class="slide level2">
<h2>だいたい全部やってくれるかっこいいヤツ</h2>
<ul>
<li>na.omitで欠損値を無視</li>
<li>dat2[, 3 : 5 ]で3~5列目の変数を使うことを指示</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GGally)
<span class="kw">ggpairs</span>(<span class="kw">na.omit</span>( dat2[ , <span class="dv">3</span> <span class="op">:</span><span class="st"> </span><span class="dv">5</span> ] ), <span class="kw">aes_string</span>( <span class="dt">colour =</span> <span class="st">&quot;sex2&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span> ) )</code></pre></div>
</section><section id="だいたい全部やってくれる" class="slide level2">
<h2>だいたい全部やってくれる</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GGally)
<span class="kw">ggpairs</span>(<span class="kw">na.omit</span>( dat2[ , <span class="dv">3</span> <span class="op">:</span><span class="st"> </span><span class="dv">5</span> ] ), <span class="kw">aes_string</span>( <span class="dt">colour =</span> <span class="st">&quot;sex2&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span> ) )</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="a_files/figure-revealjs/ggally2-1.png" width="576" /></p>
</section><section id="平均値差の検定" class="slide level2">
<h2>平均値差の検定</h2>
<ul>
<li>t.test(従属変数, 群分け変数)</li>
<li>デフォルトでwelch検定（これでいい）</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>( dat2<span class="op">$</span>igokochi<span class="op">~</span><span class="st"> </span>dat2<span class="op">$</span>sex2 )</code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  dat2$igokochi by dat2$sex2
## t = -1.5472, df = 1341.6, p-value = 0.1221
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.17626779  0.02082457
## sample estimates:
##  mean in group boy mean in group girl 
##           3.652626           3.730348</code></pre>
</section><section id="効果量を出す" class="slide level2">
<h2>効果量を出す</h2>
<ul>
<li>compute.esを使う</li>
<li>langtest.jpなどのツールに投げる</li>
<li>関数を作る</li>
</ul>
</section><section id="関数" class="slide level2">
<h2>関数</h2>
<ul>
<li>daihiko_t関数（Sappro.R 8thより）</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">daihiko_t&lt;-<span class="cf">function</span>(x,y,<span class="dt">paired=</span><span class="ot">TRUE</span>) {
  <span class="cf">if</span> (paired) {
    d&lt;-<span class="kw">data.frame</span>(x,y)
    d&lt;-<span class="kw">subset</span>(d,<span class="kw">complete.cases</span>(d))
    rt&lt;-<span class="kw">t.test</span>(d<span class="op">$</span>x,d<span class="op">$</span>y,<span class="dt">paired=</span><span class="ot">TRUE</span>)
    rsd&lt;-<span class="kw">c</span>(<span class="kw">sd</span>(d<span class="op">$</span>x,<span class="dt">na.rm=</span>T),<span class="kw">sd</span>(d<span class="op">$</span>y,<span class="dt">na.rm=</span>T))
    cohend&lt;-<span class="kw">abs</span>(<span class="kw">mean</span>(d<span class="op">$</span>x<span class="op">-</span>d<span class="op">$</span>y)<span class="op">/</span>(<span class="kw">sd</span>(d<span class="op">$</span>x<span class="op">-</span>d<span class="op">$</span>y)<span class="op">/</span><span class="kw">sqrt</span>(<span class="dv">2</span><span class="op">*</span>(<span class="dv">1</span><span class="op">-</span><span class="kw">cor</span>(d<span class="op">$</span>x,d<span class="op">$</span>y)))))
    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">meanx=</span><span class="kw">mean</span>(d<span class="op">$</span>x),<span class="dt">meany=</span><span class="kw">mean</span>(d<span class="op">$</span>y),<span class="dt">SD=</span>rsd,<span class="dt">t=</span>rt,<span class="dt">cohend=</span>cohend))
  }
  <span class="cf">else</span> {  
    rt&lt;-<span class="kw">t.test</span>(x<span class="op">~</span>y)
    rsd&lt;-<span class="kw">tapply</span>(x,y,sd,<span class="dt">na.rm=</span><span class="ot">TRUE</span>)
    rt1&lt;-<span class="kw">table</span>(y,x)
    rt2&lt;-<span class="kw">apply</span>(rt1,<span class="dv">1</span>,sum)
    cohend&lt;-(rt<span class="op">$</span>estimate[<span class="dv">1</span>]<span class="op">-</span>rt<span class="op">$</span>estimate[<span class="dv">2</span>])<span class="op">/</span><span class="kw">sqrt</span>(((rt2[<span class="dv">1</span>]<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span>rsd[<span class="dv">1</span>]<span class="op">^</span><span class="dv">2</span><span class="op">+</span>(rt2[<span class="dv">2</span>]<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span>rsd[<span class="dv">2</span>]<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>(rt2[<span class="dv">1</span>]<span class="op">+</span>rt2[<span class="dv">2</span>]<span class="op">-</span><span class="dv">2</span>))
    cohend&lt;-<span class="kw">unname</span>(cohend)
    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">N=</span>rt2,<span class="dt">SD=</span>rsd,<span class="dt">t=</span>rt,<span class="dt">cohend=</span>cohend))
  } 
}</code></pre></div>
</section><section id="回帰分析" class="slide level2">
<h2>回帰分析</h2>
<ul>
<li>lm(従属変数~独立変数, データセット)</li>
<li>超簡単</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result1&lt;-<span class="st"> </span><span class="kw">lm</span>( igokochi <span class="op">~</span><span class="st"> </span>sex2 <span class="op">+</span><span class="st"> </span>grade2 <span class="op">+</span><span class="st"> </span>zikokaizi, dat2 )
<span class="kw">summary</span>(result1)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = igokochi ~ sex2 + grade2 + zikokaizi, data = dat2)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -2.00456 -0.45062 -0.01157  0.44572  2.31819 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.77489    0.06409  27.692   &lt;2e-16 ***
## sex2girl     0.02235    0.03624   0.617    0.538    
## grade22nd    0.02646    0.04438   0.596    0.551    
## grade23rd   -0.03506    0.04415  -0.794    0.427    
## zikokaizi    0.59050    0.01638  36.043   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.6751 on 1401 degrees of freedom
##   (11 observations deleted due to missingness)
## Multiple R-squared:  0.4821, Adjusted R-squared:  0.4806 
## F-statistic:   326 on 4 and 1401 DF,  p-value: &lt; 2.2e-16</code></pre>
</section><section id="標準化係数を出す" class="slide level2">
<h2>標準化係数を出す</h2>
<ul>
<li>標準化係数とseを出す</li>
<li>あらかじめ標準化しなくていいので超便利</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(betas)
<span class="kw">betas.lm</span>(result1)</code></pre></div>
<pre><code>##                  beta    se.beta
## sex2girl   0.01187029 0.01924971
## grade22nd  0.01332170 0.02234484
## grade23rd -0.01775452 0.02235478
## zikokaizi  0.69408026 0.01925700</code></pre>
</section></section>
<section><section id="研究関心に立ち戻ってもっともっと分析" class="titleslide slide level1"><h1>研究関心に立ち戻ってもっともっと分析</h1></section><section id="学級風土と生徒の学校適応感の関連" class="slide level2">
<h2>学級風土と生徒の学校適応感の関連</h2>
<ul>
<li>学級風土（雰囲気）と生徒の学校への適応との関係は？</li>
<li>あくまでも個人の回答なので変数を作成しなければいけない
<ul>
<li>個人（風土の認知）</li>
<li>学級（認知の平均は学級の風土）</li>
<li>学級と個人の相互作用（風土認知の差、環境と個人の相性）</li>
</ul></li>
</ul>
</section><section id="個人の風土の認知にしかならないので学級平均値を作成する" class="slide level2">
<h2>個人の風土の認知にしかならないので学級平均値を作成する</h2>
<ul>
<li>学級平均と学級標準偏差の作成</li>
<li>tapply(変数, 計算するカテゴリ単位, 計算するもの)</li>
<li>[ as.character( ) ]でカッコ内の単位で結果を返してくれる</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat2<span class="op">$</span>zikokaizi_m &lt;-<span class="st"> </span><span class="kw">tapply</span>( dat2<span class="op">$</span>zikokaizi, 
                           dat2<span class="op">$</span>class, mean, <span class="dt">na.rm=</span>T )[ <span class="kw">as.character</span>( dat2<span class="op">$</span>class ) ]
dat2<span class="op">$</span>zikokaizi_sd &lt;-<span class="st"> </span><span class="kw">tapply</span>( dat2<span class="op">$</span>zikokaizi, 
                            dat2<span class="op">$</span>class, sd, <span class="dt">na.rm=</span>T )[ <span class="kw">as.character</span>( dat2<span class="op">$</span>class ) ]</code></pre></div>
</section><section id="個人レベルの変数をいじる" class="slide level2">
<h2>個人レベルの変数をいじる</h2>
<ul>
<li>生徒個人の得点を学級平均で中心化</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat2<span class="op">$</span>zikokaizi_i &lt;-<span class="st"> </span>dat2<span class="op">$</span>zikokaizi <span class="op">-</span><span class="st"> </span>dat2<span class="op">$</span>zikokaizi_m</code></pre></div>
</section><section id="学級レベルの変数をいじる" class="slide level2">
<h2>学級レベルの変数をいじる</h2>
<ul>
<li>学級レベルの変数は全体平均で中心化</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat2<span class="op">$</span>zikokaizi_mc &lt;-<span class="st"> </span>dat2<span class="op">$</span>zikokaizi_m <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>( dat2<span class="op">$</span>zikokaizi_m, <span class="dt">na.rm=</span>T )
dat2<span class="op">$</span>zikokaizi_sdc &lt;-<span class="st"> </span>dat2<span class="op">$</span>zikokaizi_sd <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>( dat2<span class="op">$</span>zikokaizi_sd, <span class="dt">na.rm=</span>T )</code></pre></div>
</section><section id="階層線形モデルで分析する" class="slide level2">
<h2>階層線形モデルで分析する</h2>
<ul>
<li>基本的にはlm()と同様
<ul>
<li>交互作用を含む場合は*で変数をくっつける</li>
</ul></li>
<li>(傾きの変量効果|グループ)
<ul>
<li>(1|class)だと切片のみの変量効果</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lmerTest)
result2 &lt;-<span class="st"> </span><span class="kw">lmer</span>( igokochi <span class="op">~</span><span class="st"> </span>sex2 <span class="op">+</span><span class="st"> </span>grade2<span class="op">+</span>
<span class="st">                  </span>zikokaizi_i<span class="op">*</span>zikokaizi_mc <span class="op">+</span>
<span class="st">                  </span>zikokaizi_sdc <span class="op">+</span>
<span class="st">                </span>( zikokaizi_i<span class="op">|</span>class )
                , <span class="dt">REML =</span> F, <span class="dt">data =</span> dat2 )
<span class="kw">summary</span>(result2)</code></pre></div>
<pre><code>## Linear mixed model fit by maximum likelihood . t-tests use
##   Satterthwaite&#39;s method [lmerModLmerTest]
## Formula: 
## igokochi ~ sex2 + grade2 + zikokaizi_i * zikokaizi_mc + zikokaizi_sdc +  
##     (zikokaizi_i | class)
##    Data: dat2
## 
##      AIC      BIC   logLik deviance df.resid 
##   2898.2   2961.1  -1437.1   2874.2     1394 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -2.9525 -0.6520 -0.0100  0.6659  3.4927 
## 
## Random effects:
##  Groups   Name        Variance Std.Dev. Corr 
##  class    (Intercept) 0.001176 0.03430       
##           zikokaizi_i 0.005693 0.07545  -1.00
##  Residual             0.445902 0.66776       
## Number of obs: 1406, groups:  class, 46
## 
## Fixed effects:
##                            Estimate Std. Error         df t value Pr(&gt;|t|)
## (Intercept)                 3.68434    0.03853  483.30000  95.629  &lt; 2e-16
## sex2girl                    0.02438    0.03597 1386.90000   0.678    0.498
## grade22nd                   0.02604    0.04540  342.90000   0.574    0.567
## grade23rd                  -0.03550    0.04715  330.60000  -0.753    0.452
## zikokaizi_i                 0.58801    0.01998   51.30000  29.432  &lt; 2e-16
## zikokaizi_mc                0.63992    0.09649  183.00000   6.632 3.62e-10
## zikokaizi_sdc               0.02247    0.15419  305.40000   0.146    0.884
## zikokaizi_i:zikokaizi_mc    0.06964    0.10249   50.40000   0.679    0.500
##                             
## (Intercept)              ***
## sex2girl                    
## grade22nd                   
## grade23rd                   
## zikokaizi_i              ***
## zikokaizi_mc             ***
## zikokaizi_sdc               
## zikokaizi_i:zikokaizi_mc    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             (Intr) sx2grl grd22n grd23r zikkz_ zkkz_m zkkz_s
## sex2girl    -0.525                                          
## grade22nd   -0.609  0.009                                   
## grade23rd   -0.624  0.015  0.507                            
## zikokaizi_i -0.051 -0.038 -0.004 -0.007                     
## zikokaiz_mc  0.037  0.000  0.043 -0.126 -0.002              
## zikokaz_sdc -0.159 -0.009  0.115  0.284 -0.021 -0.006       
## zkkz_:zkkz_ -0.004  0.010 -0.002 -0.003  0.012 -0.151 -0.002</code></pre>
</section><section id="enjoy" class="slide level2">
<h2>Enjoy</h2>
</section><section id="宣伝" class="slide level2">
<h2>宣伝</h2>
<ul>
<li>大学院生FC型クラウドファンディングやってます <img src="crowd.png" alt="crowd" /></li>
</ul>
</section><section id="僕が質問するコーナー" class="slide level2">
<h2>（僕が）質問（する）コーナー</h2>
<ul>
<li>projectはdropboxでPC間で共有していたが片方のPCから画像を貼り付けられない
<ul>
<li>パスの問題？<br />
</li>
</ul></li>
<li>テキストにアニメーションをつけれるのか</li>
<li>コード内でコメントアウトを使えない</li>
</ul>
</section></section>
    </div>
  </div>

  <script src="a_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="a_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Transition style
        transition: 'default', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        // Optional reveal.js plugins
        dependencies: [
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
